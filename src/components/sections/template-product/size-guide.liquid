
{% assign type = product.type | downcase %}

{% for block in section.blocks %}
  {% if block.settings.title %}
    {% assign sizeGuideTitle = block.settings.title | downcase %}
    {% if sizeGuideTitle == type %}
      {% assign activeElement = block.settings.title %}
    {% else %}
      {% if forloop.first %}
        {% assign activeElement = block.settings.title %}
      {% endif %}
    {% endif %}
  {% endif %}
{% endfor %}

<modal-dialog id="PopupModal-Sizeguide" class="hidden fixed top-0 left-0 bg-black bg-opacity-20 w-full h-full z-20">
  <div class="absolute p-4 lg:p-6 bg-background h-fit left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 max-h-[calc(100vh_-_32px)] w-[865px] max-w-[calc(100vw_-_32px)] scrollbar-thin overflow-y-auto rounded-xl">
    <tabs-component class="sizeguide normal-tab">
      <div class="mb-4 lg:mb-6 w-full">
        <div class="flex items-center justify-between">
          <span class="text-h5 lg:text-h4 text-center !font-medium text-primary capitalize font-heading">{{ 'products.product.size_guide' | t }} {{ product.type }}</span>
          <span class="text-primary cursor-pointer bg-background w-10 h-10 flex items-center justify-center rounded-full close">
            {% render 'icon-close', class: 'w-6 h-6' %}
          </span>
        </div>
        <select-toggle class="hidden py-2 pl-4 pr-3 border border-solid border-primary relative rounded-[100px] clickout-accordion">
          <div class="summary flex items-center gap-2 text-primary cursor-pointer">
            <span class="value text-sm leading-5 text-primary" data-value="{{ activeElement }}">{{ activeElement }}</span>
            {% render 'icon-down', class: 'w-5 h-5 icon-add' %}
            {% render 'icon-up', class: 'w-5 h-5 icon-minus' %}
          </div>
          <div class="details dropitem absolute top-full left-0 bg-background rounded-b-sm w-max min-w-full shadow-megamenu">
            <ul class="w-full py-3 pr-3 pl-4">
              {% for block in section.blocks %}
                {% if block.settings.title %}
                  <li class="tab-heading transition-colors rounded cursor-pointer text-sm leading-5 text-primary p-2{% if block.settings.title == activeElement %} active{% endif %}" data-id="{{ block.id }}" data-value="{{ block.settings.title }}">{{ block.settings.title }}</li>
                {% endif %}
              {% endfor %}
            </ul>
          </div>
        </select-toggle>
      </div>
      <div class="tabs-detail">
        {% for block in section.blocks %}
          <div class="tab-detail{% unless block.settings.title == activeElement %} hidden{% endunless %}" data-id="{{ block.id }}">
            {% if block.settings.feature_image != blank %}
              <img src="{{ block.settings.feature_image | image_url: width: block.settings.feature_image.width }}"
                  sizes="{{ block.settings.feature_image.width }}px"
                  alt="{{ block.settings.feature_image | split: "/" | last | replace: "-", " " | split: "." | first }}"
                  class="block mx-auto w-full rounded-lg overflow-hidden bg-image-placeholder bg-no-repeat bg-cover bg-center text-transparent"
                  loading="lazy"
                  width="{{ block.settings.feature_image.width }}"
                  height="{{ block.settings.feature_image.height }}">
            {% endif %}
            {% if block.settings.feature_image_2 != blank %}
              <img src="{{ block.settings.feature_image_2 | image_url: width: block.settings.feature_image_2.width }}"
                  sizes="{{ block.settings.feature_image_2.width }}px"
                  alt="{{ block.settings.feature_image_2 | split: "/" | last | replace: "-", " " | split: "." | first }}"
                  class="block mx-auto w-full rounded-lg overflow-hidden bg-image-placeholder bg-no-repeat bg-cover bg-center text-transparent"
                  loading="lazy"
                  width="{{ block.settings.feature_image_2.width }}"
                  height="{{ block.settings.feature_image_2.height }}">
            {% endif %}
          </div>
        {% endfor %}
      </div>
    </tabs-component>

  </div>
</modal-dialog>
<script defer>


</script>
{% schema %}
  {
    "name": "Size guide",
    "settings": [],
    "blocks": [
      {
        "type": "type",
        "name": "Product type",
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Product type"
          },
          {
            "type": "image_picker",
            "id": "feature_image",
            "label": "Sizeguide image"
          },
          {
            "type": "image_picker",
            "id": "feature_image_2",
            "label": "Sizeguide image 2"
          },
        ]
      }
    ]
  }
{% endschema %}